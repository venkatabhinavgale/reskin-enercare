"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function insertAfter(e,t){t.parentNode.insertBefore(e,t.nextSibling)}function bttLoad(e){var n=document.querySelector("header.site-header"),o=document.getElementById("enercare-btt-button"),t={rootMargin:"".concat(2*n.clientHeight,"px"),threshold:1},t=new IntersectionObserver(function(e,t){e.forEach(function(e){e.isIntersecting?o.classList.add("hidden"):o.classList.remove("hidden")})},t);o.addEventListener("click",function(e){var t=document.querySelector(".title-area a");window.scrollTo({top:n.scrollTop,left:0,behavior:"smooth"}),t.focus({preventScroll:!0})}),t.observe(n)}jQuery(function(t){t(".menu-toggle").click(function(){}),t(".menu-item-has-children > .submenu-expand").click(function(e){t(this).toggleClass("expanded"),e.preventDefault()}),t(".search-toggle").click(function(){t(".menu-toggle, .nav-menu").removeClass("active"),t(".search-toggle, .header-search").toggleClass("active"),t(".site-header .search-field").focus()});var e=new AddSearchClient("3145819e621ccfb6dbf5116b2c92967b"),n={searchResultsPageUrl:"/",searchParameter:"addsearch",updateBrowserHistory:!1},o=new AddSearchUI(e,n),e=(o.searchField({autofocus:!1,containerId:"searchfield",placeholder:"Search",icon:!1}),new AddSearchUI(e,n)),r=(e.searchField({autofocus:!1,containerId:"mobile-searchfield",placeholder:"Search",icon:!1}),o.start(),e.start(),window),a=document,i=void 0;function s(e){for(var t=e+"=",n=decodeURIComponent(a.cookie).split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""}r.Enercare={},r.Enercare.PPCparams=[{utm_source:"utm_source"},{utm_medium:"utm_medium"},{utm_campaign:"utm_campaign"},{gclid:"gclid"}],r.Enercare.getUrlParameter=function(e){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),e=new RegExp("[\\?&]".concat(e,"=([^&#]*)")).exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))},r.Enercare.logPPCParamsToStorage=function(){r.Enercare.PPCparams.forEach(function(e){var t=Object.keys(e)[0],e=e[t];sessionStorage[t]||(sessionStorage[t]=r.Enercare.getUrlParameter(e))})},r.Enercare.handleHiddenFormFields=function(n){var e;n.ruid===i?((e=a.createElement("input")).setAttribute("type","hidden"),e.setAttribute("name","ruid"),e.setAttribute("value",s("ruid")),n.appendChild(e)):n.ruid.setAttribute("value",s("ruid")),r.Enercare.PPCparams.forEach(function(e){var t,e=Object.keys(e)[0];n.key===i?((t=a.createElement("input")).setAttribute("type","hidden"),t.setAttribute("name",e),t.setAttribute("value",sessionStorage[e]),n.appendChild(t)):n.key.setAttribute("value",sessionStorage[e])})},n=a.querySelectorAll(".ginput_container_phone input"),o=a.querySelectorAll(".ginput_container_email input");try{o.forEach(function(e){e.setAttribute("inputmode","email")}),n.forEach(function(e){e.setAttribute("inputmode","tel")})}catch(e){console.warn("No fields")}r.Enercare.logPPCParamsToStorage()}),window.addEventListener("load",bttLoad);var PortentToggleNav=function(){};function setupToggleNav(){performance.mark("nav-build-start");var e=new PortentToggleNav;e.menu=document.getElementById("slider-menu"),e.toggleButton=document.getElementById("slider-menu-toggle"),e.logo="https://www.enercare.ca/wp-content/uploads/2021/11/EC_LOGO_H_P_4C.svg",e.cta='<div class="site-header__header-phone header-phone"><span class="header-phone__cta"><strong>Speak with an expert</strong></span><a class="header-phone__link cl-phone" href="tel:1-855-642-8607"><span class="screen-reader-text">Click to call Enercare1-855-642-8607</span><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M19.23 15.26l-2.54-.29c-.61-.07-1.21.14-1.64.57l-1.84 1.84c-2.83-1.44-5.15-3.75-6.59-6.59l1.85-1.85c.43-.43.64-1.03.57-1.64l-.29-2.52c-.12-1.01-.97-1.77-1.99-1.77H5.03c-1.13 0-2.07.94-2 2.07.53 8.54 7.36 15.36 15.89 15.89 1.13.07 2.07-.87 2.07-2v-1.73c.01-1.01-.75-1.86-1.76-1.98z"></path></svg><strong class="header-phone__number">1-855-642-8607</strong></a></div>',e.extraMobileElements=[".addsearch-searchfield input"],e.init(),performance.mark("nav-build-end"),performance.measure("nav-build-total","nav-build-start","nav-build-end"),console.log(loginMeasure.duration)}function createTableCaption(){var e=document.querySelectorAll(".wp-block-table");0<e.length&&void 0!==e&&e.forEach(function(e){var t=e.querySelector(":scope > table"),e=e.querySelector(":scope > figcaption");t.createCaption().textContent=e.innerHTML})}PortentToggleNav.prototype.menu="",PortentToggleNav.prototype.logo=null,PortentToggleNav.prototype.cta=null,PortentToggleNav.prototype.mobileWidth=1023,PortentToggleNav.prototype.keyModifierDown=!1,PortentToggleNav.prototype.closeButton="",PortentToggleNav.prototype.touchStartX=0,PortentToggleNav.prototype.touchEndX=0,PortentToggleNav.prototype.init=function(){var t=this;performance.mark("toggle-menu-init-start"),""!==this.menu?(this.menu.classList.add("portent-toggle-nav"),this.setupMobileToggle(),this.setupStatusArea(),this.setupBrandArea(),this.navigationMenuToggle(this.menu),this.setupClickOutside()):console.log("Please set a menu property"),this.menu.addEventListener("keydown",function(e){16===e.keyCode&&(this.keyModifierDown=!0)}),this.menu.addEventListener("keyup",function(e){16===e.keyCode&&(this.keyModifierDown=!1)}),document.addEventListener("touchstart",function(e){t.touchstartX=e.changedTouches[0].screenX}),document.addEventListener("touchend",function(e){t.touchendX=e.changedTouches[0].screenX,t.checkDirection(e)}),performance.mark("toggle-menu-init-end"),performance.measure("toggle-menu-init","toggle-menu-init-start","toggle-menu-init-end")},PortentToggleNav.prototype.setupClickOutside=function(){var t=this,n=this.menu;document.addEventListener("click",function(e){n.contains(e.target)||t.closeAllMenus(n)})},PortentToggleNav.prototype.setupBrandArea=function(){var e,t=document.createElement("div");t.classList.add("brand-area"),this.logo&&((e=document.createElement("img")).classList.add("brand-area__logo"),e.src=this.logo,t.appendChild(e)),this.cta&&((e=document.createElement("div")).classList.add("brand-area__cta"),e.innerHTML=this.cta,t.appendChild(e)),this.menu.insertBefore(t,this.menu.children[0])},PortentToggleNav.prototype.statusButtonKeys=function(e){var t=this.menu.querySelector("[data-open=true]"),n=!1;null===t&&(t=this.menu.querySelector("ul"),n=!0),(38===e.keyCode||9===e.keyCode&&this.keyModifierDown)&&(console.log("Key up pressed on menu item"),e.stopPropagation(),e.preventDefault(),this.findNextMenuLink(e,t,"up",n)),40!==e.keyCode&&(9!==e.keyCode||this.keyModifierDown)||(console.log("Key down pressed on menu item"),e.stopPropagation(),e.preventDefault(),this.findNextMenuLink(e,t,"down",n))},PortentToggleNav.prototype.setupStatusArea=function(){performance.mark("toggle-menu-status-area-start");var t=this,e=this.menu,n=document.createElement("div"),o=document.createElement("button"),r=document.createElement("button");performance.mark("toggle-menu-status-area-end"),performance.measure("toggle-nav-status-setup","toggle-menu-status-area-start","toggle-menu-status-area-end"),t.closebutton=r,n.setAttribute("data-interface","statusArea"),r.innerText="Close",r.classList.add("mobile-close-btn"),o.innerText="Back to main menu",o.classList.add("mobile-back-btn"),n.appendChild(o),n.appendChild(r),e.insertBefore(n,e.children[0]),o.addEventListener("click",function(){t.closeAllMenus(e)}),r.addEventListener("click",function(){t.closeMobileMenu(e)}),o.addEventListener("keydown",function(e){t.statusButtonKeys(e)}),r.addEventListener("keydown",function(e){t.statusButtonKeys(e)}),performance.mark("toggle-menu-status-area-end"),performance.measure("toggle-nav-status-setup","toggle-menu-status-area-start","toggle-menu-status-area-end")},PortentToggleNav.prototype.setupMobileToggle=function(){var e,t=this,n=this.menu;this.toggleButton?e=this.toggleButton:(e.innerText="Menu",e=document.createElement("button"),n.parentElement.insertBefore(e,n)),e.addEventListener("click",function(){t.openMobileMenu(t.menu)}),e.setAttribute("aria-expanded","false")},PortentToggleNav.prototype.setSubMenuStatus=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0]?this.menu.setAttribute("data-menu","open"):this.menu.removeAttribute("data-menu")},PortentToggleNav.prototype.expandTopLevelItem=function(e){e.preventDefault(),"true"===e.target.parentNode.dataset.open?(e.target.dataset.open="false",e.target.setAttribute("aria-expanded","false"),this.setSubMenuStatus(!1)):(this.closeAllMenus(this.menu),e.target.parentNode.dataset.open="true",e.target.setAttribute("aria-expanded","true"),this.setSubMenuStatus(!0),this.focusFirstOption(e.target.parentNode))},PortentToggleNav.prototype.navigationMenuToggle=function(n){var e=n.querySelectorAll("[data-children=true]"),o=this;e.forEach.call(e,function(t,e){t.querySelector("button").addEventListener("click",function(e){return"true"===this.parentNode.dataset.open?(this.parentNode.dataset.open="false",this.setAttribute("aria-expanded","false"),o.setSubMenuStatus()):(o.closeAllMenus(n),this.parentNode.dataset.open="true",this.setAttribute("aria-expanded","true"),o.setSubMenuStatus(!0)),o.focusFirstOption(this.parentNode),!1}),t.querySelector("button").addEventListener("keydown",function(e){return window.outerWidth<=o.mobileWidth?((38===e.keyCode||9===e.keyCode&&this.keyModifierDown)&&(e.preventDefault(),o.findNextMenuLink(e,this.parentNode.parentNode,"up",!0)),40!==e.keyCode&&(9!==e.keyCode||this.keyModifierDown)||(e.preventDefault(),o.findNextMenuLink(e,this.parentNode.parentNode,"down",!0)),39===e.keyCode&&o.expandTopLevelItem(e)):([40,39].includes(e.keyCode)&&o.expandTopLevelItem(e),[38].includes(e.keyCode)&&o.closeAllMenus(n)),!1}),t.querySelectorAll("a").forEach(function(e){e.addEventListener("keydown",function(e){window.outerWidth<=o.mobileWidth?((38===e.keyCode||9===e.keyCode&&this.keyModifierDown)&&(e.stopPropagation(),e.preventDefault(),o.findNextMenuLink(e,t,"up")),40!==e.keyCode&&(9!==e.keyCode||this.keyModifierDown)||(e.stopPropagation(),e.preventDefault(),o.findNextMenuLink(e,t,"down"))):(38===e.keyCode&&(e.stopPropagation(),e.preventDefault(),o.findNextMenuLink(e,t,"up")),40===e.keyCode&&(e.stopPropagation(),e.preventDefault(),o.findNextMenuLink(e,t,"down")))}),e.addEventListener("keyup",function(e){27===e.keyCode&&(o.closeAllMenus(n),t.querySelector("button").focus())})})})},PortentToggleNav.prototype.checkDirection=function(e){this.touchendX,this.touchstartX,this.touchendX,this.touchstartX},PortentToggleNav.prototype.getTopLevelParentFromFocus=function(){return document.activeElement.parentElement},PortentToggleNav.prototype.findNextMenuLink=function(e,t,n,o){console.log("topLevelParent"),console.log(t),n&&void 0!==n||(n="down"),o=o||!1,r=window.outerWidth<=this.mobileWidth?(r=o?(console.log("Pulling from top level"),a=Array.from(this.menu.querySelectorAll(".mobile-close-btn")),Array.from(t.querySelectorAll(":scope > li > button, :scope > li > a"))):(a=Array.from(this.menu.querySelectorAll(".mobile-back-btn, .mobile-close-btn")),Array.from(t.querySelectorAll("a"))),[].concat(_toConsumableArray(a),_toConsumableArray(r))):Array.from(t.querySelectorAll("a")),console.log("Outputting All Links"),console.log(r);var r,o=r[0],a=r[r.length-1],i=document.activeElement;i===o&&"up"===n?a.focus():i===a&&"down"===n?o.focus():(r.forEach(function(e,t){i===e&&("down"===n?r[t+1].focus():"up"===n&&r[t-1].focus())}),console.log(document.activeElement))},PortentToggleNav.prototype.closeAllMenus=function(e){e=e.querySelectorAll("button[aria-expanded=true]");e.forEach(function(e){e.parentNode.dataset.open="false",e.setAttribute("aria-expanded","false")}),console.log(e),0<e.length&&e.item(0).focus(),this.setSubMenuStatus(!1)},PortentToggleNav.prototype.setDocumentAttribute=function(){document.querySelector("body").setAttribute("data-menu","open")},PortentToggleNav.prototype.removeDocumentAttribute=function(){document.querySelector("body").removeAttribute("data-menu")},PortentToggleNav.prototype.openMobileMenu=function(e){e.setAttribute("data-mobile","open"),this.setDocumentAttribute(),this.menu.querySelector(".mobile-close-btn").focus()},PortentToggleNav.prototype.closeMobileMenu=function(){this.removeDocumentAttribute(),this.closeAllMenus(this.menu),"open"===this.menu.getAttribute("data-mobile")&&this.menu.removeAttribute("data-mobile"),this.toggleButton.focus(),this.setSubMenuStatus(!1)},PortentToggleNav.prototype.focusFirstOption=function(e){e.querySelector(".sub-menu a").focus({preventScroll:!0})},PortentToggleNav.prototype.debouceKeys=function(o,r,a){var i;return function(){var e=this,t=arguments,n=a&&!i;clearTimeout(i),i=setTimeout(function(){i=null,a||o.apply(e,t)},r),n&&o.apply(e,t)}},window.addEventListener("load",setupToggleNav),window.addEventListener("load",createTableCaption),jQuery(function(e){e(window).on("load",function(){e("input#wp-block-search__input-1").attr("title","Keywords for a site-wide search"),e("input#wp-block-search__input-1").attr("aria-label","Keywords for a site-wide search")}),e(".ec-logo img").attr("alt","Enercare logo & Proud Partner logo"),e(".block-location-finder__input").attr("aria-labelledby","Postal code input"),e(".ec-cta-commercial a").attr("role","link"),e(".ec-cta-commercial a").attr("tabindex","0")}),jQuery(function(n){function e(e){var t=null;try{t=n(e)}catch(e){return}(t=t.length?t:n("[name="+this.hash.slice(1)+"]")).length&&(e=0,"fixed"==n(".site-header").css("position")&&(e=n(".site-header").height()),n("body").hasClass("admin-bar")&&(e+=n("#wpadminbar").height()),n("html,body").animate({scrollTop:t.offset().top-e},1e3))}window.location.hash&&e(window.location.hash),n('a[href*="#"]:not([href="#"]):not(.no-scroll)').click(function(){location.pathname.replace(/^\//,"")!=this.pathname.replace(/^\//,"")&&location.hostname!=this.hostname||e(this.hash)})});